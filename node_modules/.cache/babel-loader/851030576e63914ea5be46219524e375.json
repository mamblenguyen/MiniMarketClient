{"ast":null,"code":"var _s = $RefreshSig$();\n// src/store/userStore.js\nlet currentUser = null;\nlet setUserCallback = () => {};\nexport const setUser = user => {\n  currentUser = user;\n  setUserCallback(user);\n};\nexport const useUser = () => {\n  _s();\n  const [user, setUserState] = useState(currentUser);\n  useEffect(() => {\n    const token = localStorage.getItem(\"accessToken\");\n    if (token) {\n      try {\n        const decoded = jwtDecode(token);\n        const userObj = {\n          id: decoded.id,\n          displayName: decoded.username,\n          email: decoded.email,\n          role: decoded.role,\n          slug: decoded.slug\n        };\n        currentUser = userObj;\n        setUserState(userObj);\n      } catch (error) {\n        console.error(\"Invalid token\", error);\n        currentUser = null;\n        setUserState(null);\n      }\n    } else {\n      currentUser = null;\n      setUserState(null);\n    }\n    setUserCallback = setUserState;\n    return () => {\n      setUserCallback = () => {};\n    };\n  }, []);\n  return user;\n};\n_s(useUser, \"VGsopvTTow6gibCHpDTS4Bbrw1s=\");","map":{"version":3,"names":["currentUser","setUserCallback","setUser","user","useUser","_s","setUserState","useState","useEffect","token","localStorage","getItem","decoded","jwtDecode","userObj","id","displayName","username","email","role","slug","error","console"],"sources":["D:/HocLapTrinh/ProjectBenXe/MiniMarketClient/src/store/userStore.js"],"sourcesContent":["// src/store/userStore.js\r\nlet currentUser = null;\r\nlet setUserCallback = () => {};\r\n\r\nexport const setUser = (user) => {\r\n  currentUser = user;\r\n  setUserCallback(user);\r\n};\r\n\r\nexport const useUser = () => {\r\n  const [user, setUserState] = useState(currentUser);\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"accessToken\");\r\n    if (token) {\r\n      try {\r\n        const decoded = jwtDecode(token);\r\n        const userObj = {\r\n          id: decoded.id,\r\n          displayName: decoded.username,\r\n          email: decoded.email,\r\n          role: decoded.role,\r\n          slug: decoded.slug,\r\n        };\r\n        currentUser = userObj;\r\n        setUserState(userObj);\r\n      } catch (error) {\r\n        console.error(\"Invalid token\", error);\r\n        currentUser = null;\r\n        setUserState(null);\r\n      }\r\n    } else {\r\n      currentUser = null;\r\n      setUserState(null);\r\n    }\r\n\r\n    setUserCallback = setUserState;\r\n\r\n    return () => {\r\n      setUserCallback = () => {};\r\n    };\r\n  }, []);\r\n\r\n  return user;\r\n};\r\n"],"mappings":";AAAA;AACA,IAAIA,WAAW,GAAG,IAAI;AACtB,IAAIC,eAAe,GAAGA,CAAA,KAAM,CAAC,CAAC;AAE9B,OAAO,MAAMC,OAAO,GAAIC,IAAI,IAAK;EAC/BH,WAAW,GAAGG,IAAI;EAClBF,eAAe,CAACE,IAAI,CAAC;AACvB,CAAC;AAED,OAAO,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC3B,MAAM,CAACF,IAAI,EAAEG,YAAY,CAAC,GAAGC,QAAQ,CAACP,WAAW,CAAC;EAElDQ,SAAS,CAAC,MAAM;IACd,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;IACjD,IAAIF,KAAK,EAAE;MACT,IAAI;QACF,MAAMG,OAAO,GAAGC,SAAS,CAACJ,KAAK,CAAC;QAChC,MAAMK,OAAO,GAAG;UACdC,EAAE,EAAEH,OAAO,CAACG,EAAE;UACdC,WAAW,EAAEJ,OAAO,CAACK,QAAQ;UAC7BC,KAAK,EAAEN,OAAO,CAACM,KAAK;UACpBC,IAAI,EAAEP,OAAO,CAACO,IAAI;UAClBC,IAAI,EAAER,OAAO,CAACQ;QAChB,CAAC;QACDpB,WAAW,GAAGc,OAAO;QACrBR,YAAY,CAACQ,OAAO,CAAC;MACvB,CAAC,CAAC,OAAOO,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;QACrCrB,WAAW,GAAG,IAAI;QAClBM,YAAY,CAAC,IAAI,CAAC;MACpB;IACF,CAAC,MAAM;MACLN,WAAW,GAAG,IAAI;MAClBM,YAAY,CAAC,IAAI,CAAC;IACpB;IAEAL,eAAe,GAAGK,YAAY;IAE9B,OAAO,MAAM;MACXL,eAAe,GAAGA,CAAA,KAAM,CAAC,CAAC;IAC5B,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,OAAOE,IAAI;AACb,CAAC;AAACE,EAAA,CAnCWD,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module"}